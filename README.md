# 在线仿真平台

一个基于Web的在线仿真平台，支持通过对话调用大模型生成仿真结果。平台集成了3D CAD交互、物理仿真和AI对话功能。

## 功能特性

### 🎨 3D CAD 交互
- **多种几何体**: 支持创建立方体、球体、圆柱体
- **实时渲染**: 基于Three.js的高性能3D渲染
- **交互控制**: 鼠标拖拽旋转、滚轮缩放、点击选择对象
- **视图模式**: 支持线框模式和实体模式切换
- **对象信息**: 实时显示选中对象的位置和旋转信息

### 🤖 AI 对话功能
- **智能助手**: 集成大模型对话功能
- **自然语言**: 支持中文和英文交互
- **自动执行**: 通过对话自动创建3D模型
- **上下文理解**: 理解用户意图并执行相应操作

### ⚡ 物理仿真
- **重力仿真**: 模拟物体在重力作用下的运动
- **碰撞检测**: 支持物体间的碰撞仿真
- **实时动画**: 可视化仿真过程
- **结果分析**: 显示仿真数据和结果

### 🎯 用户界面
- **现代化设计**: 美观的渐变背景和卡片式布局
- **响应式布局**: 支持桌面和移动设备
- **直观操作**: 快速操作按钮和参数控制面板
- **实时反馈**: 加载状态和操作提示

## 技术栈

### 后端
- **Python Flask**: Web服务器框架
- **Flask-SocketIO**: WebSocket支持
- **NumPy**: 数值计算
- **SciPy**: 科学计算

### 前端
- **Three.js**: 3D图形渲染
- **Socket.IO**: 实时通信
- **HTML5/CSS3**: 现代化界面
- **JavaScript ES6**: 交互逻辑

## 安装和运行

### 1. 环境要求
- Python 3.7+
- Node.js (可选，用于开发)

### 2. 安装依赖
```bash
pip install -r requirements.txt
```

### 3. 启动服务器
```bash
python app.py
```

### 4. 访问平台
打开浏览器访问: `http://localhost:5000`

## 使用指南

### 创建3D模型

#### 方法1: 快速操作按钮
1. 在右侧面板的"快速操作"区域
2. 点击"创建立方体"、"创建球体"或"创建圆柱体"按钮
3. 调整参数面板中的尺寸、半径、高度等参数

#### 方法2: AI对话
1. 在对话框中输入："请帮我创建一个立方体"
2. AI助手会理解您的需求并自动创建模型
3. 支持的关键词：立方体、球体、圆柱体、cube、sphere、cylinder

### 3D视图操作
- **旋转视图**: 鼠标左键拖拽
- **缩放视图**: 鼠标滚轮
- **选择对象**: 点击3D对象
- **重置视图**: 点击"重置视图"按钮
- **切换模式**: 点击"线框模式"或"实体模式"

### 物理仿真
1. 点击"重力仿真"按钮开始重力仿真
2. 点击"碰撞仿真"按钮开始碰撞仿真
3. 在"仿真结果"面板查看仿真数据
4. 仿真过程会创建动画球体展示运动轨迹

### AI对话示例
```
用户: 你好，请帮我创建一个球体
AI: 我理解您想要创建一个球体。球体是一个完美的三维圆形物体。我可以为您创建一个球体模型，并计算其体积和表面积。

用户: 能帮我进行重力仿真吗？
AI: 我可以帮您进行物理仿真。请告诉我您想要仿真什么类型的物理现象，比如重力、碰撞、流体等。
```

## 项目结构

```
web/
├── app.py                 # Flask主应用
├── requirements.txt       # Python依赖
├── README.md             # 项目说明
├── templates/
│   └── index.html        # 主页面模板
└── static/
    ├── css/
    │   └── style.css     # 样式文件
    └── js/
        └── main.js       # 主要JavaScript逻辑
```

## 扩展功能

### 集成真实大模型
1. 在`app.py`中的`simulate_llm_response`函数
2. 替换为真实的大模型API调用
3. 支持OpenAI、Claude、本地模型等

### 添加更多仿真类型
1. 在`app.py`中添加新的仿真函数
2. 在前端添加对应的控制按钮
3. 扩展仿真参数和结果展示

### 增强3D功能
1. 添加更多几何体类型
2. 实现材质和纹理
3. 支持导入外部3D模型
4. 添加动画和特效

## 开发说明

### 后端开发
- 主要文件: `app.py`
- 添加新路由: 在`@app.route`装饰器下定义
- 添加WebSocket事件: 使用`@socketio.on`装饰器
- 仿真算法: 在`perform_simulation`函数中扩展

### 前端开发
- 主要文件: `static/js/main.js`
- 3D场景: 使用Three.js API
- 事件处理: 在`initEventListeners`函数中添加
- 样式修改: 编辑`static/css/style.css`

## 故障排除

### 常见问题

1. **端口被占用**
   ```bash
   # 修改app.py中的端口号
   socketio.run(app, debug=True, host='0.0.0.0', port=5001)
   ```

2. **WebSocket连接失败**
   - 检查防火墙设置
   - 确认Socket.IO版本兼容性

3. **3D渲染问题**
   - 检查浏览器WebGL支持
   - 更新显卡驱动

4. **依赖安装失败**
   ```bash
   # 升级pip
   pip install --upgrade pip
   # 使用国内镜像
   pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/
   ```

## 许可证

MIT License

## 贡献

欢迎提交Issue和Pull Request来改进这个项目！

## 联系方式

如有问题或建议，请通过以下方式联系：
- 提交GitHub Issue
- 发送邮件至项目维护者 